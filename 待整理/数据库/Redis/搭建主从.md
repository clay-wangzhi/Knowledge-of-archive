
主从概念

a) ⼀个master可以拥有多个slave，⼀个slave⼜可以拥有多个slave，如此下去，形成了强⼤的多级服务器集群架构

b) master用来写数据，slave用来读数据，经统计：网站的读写比率是10:1

c) 通过主从配置可以实现读写分离

d) master和slave都是一个redis实例



![Image](images/8a2907346614c0455955866e7e8d107d79e10864.png)

主从配置

配置主

a) 查看当前主机的ip地址



Ifconfig

![Image](images/7a2b4d6c55ad03c3da49abe1c9b769d340c7f56f.png)

b) 修改etc/redis/redis.conf文件



sudo vi redis.conf

bind 192.168.110.36



c) 重启redis服务



ps aux | grep redis

![Image](images/4d01adf9bba8b0e901b2015ec349bf61dc9e9427.png)

Sudo kill -9 12916

Sudo redis-server /etc/redis/redis.conf



配置从

a) 复制etc/redis/redis.conf文件



sudo cp redis.conf ./slave.conf

b) 修改redis/slave.conf文件



sudo vi slave.conf

c) 编辑内容



bind 192.168.110.36
slaveof 192.168.110.36 6379
port 6378

d) 开启redis服务



sudo redis-server slave.conf

e) 查看主从关系



redis-cli -h 192.168.110.36 info Replication

![Image](images/933c216ca624be3c7785fcb55d8b57259126fdf8.png)

操作数据

a) 进入主客户端



redis-cli -h 192.168.110.36 -p 6379

b) 进入从客户端



redis-cli -h 192.168.110.36 -p 6378

c) 在master上写数据



mset a1 11 a2 22 a3 33

![Image](images/384cc757ab06f82a127702d65b206a89588f9fa7.png)

d) 在slave上读数据



![Image](images/01863c2105972795c0ce1ebaeb3d86424c418c62.png)
